"use client";

import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faAnglesRight } from "@fortawesome/free-solid-svg-icons";
import Link from "next/link";
import { ReactElement, useState } from "react";
import Image from "next/image";
import { ChevronDown } from "lucide-react";

export default function SectionMain(): ReactElement {
  const [isDropdownOpen, setIsDropdownOpen] = useState(false);

  return (
    <div className="w-full font-sans">
      <div className="bg-white px-14 py-4">
        <div className="flex justify-around w-full">
          <div className="flex justify-between w-full items-center h-20">
            <div className="flex items-center">
              <Image
                src="/images/Logo.png"
                alt="logo sunvolt"
                width={170}
                height={91}
                priority
                style={{
                  borderStyle: "none",
                  verticalAlign: "top",
                  maxWidth: "100%",
                  height: "auto",
                  boxSizing: "border-box",
                  boxShadow: "none",
                }}
              />
            </div>
            <div className="flex gap-[5rem]">
              <div
                className="hidden md:flex items-center gap-5 space-x-8"
                style={{
                  transform: "scaleY(1)",
                  fontStyle: "normal",
                  fontStretch: "100%",
                  fontSize: "15px",
                  fontWeight: "600",
                }}
              >
                <div
                  className="relative"
                  style={{
                    transform: "scaleY(1)",
                    fontStyle: "normal",
                    fontStretch: "100%",
                    fontSize: "15px",
                    fontWeight: "600",
                  }}
                >
                  <button
                    className="flex items-center text-sm font-medium text-gray-800 hover:text-gray-600 "
                    onClick={() => setIsDropdownOpen(!isDropdownOpen)}
                    style={{
                      transform: "scaleY(1)",
                      fontStyle: "normal",
                      fontStretch: "100%",
                      fontSize: "15px",
                      fontWeight: "600",
                    }}
                  >
                    Solutions photovoltaïques
                    <ChevronDown
                      strokeWidth={2.5}
                      className={`ml-1 h-[16px] w-[16px] transition-transform ${isDropdownOpen ? "rotate-180" : ""
                        }`}
                    />
                  </button>

                  {isDropdownOpen && (
                    <Card
                      imageSrc="/path-to-your-image.jpg"
                      title="Gamme SunEco"
                      description="Le solaire performant et durable au meilleur prix"
                      linkText="En savoir plus"
                      linkHref="#"
                    />
                  )}
                </div>

                <Link
                  href="/garanties"
                  className="text-sm font-medium text-gray-800 hover:text-gray-600 transition-colors"
                  style={{
                    transform: "scaleY(1)",
                    fontStyle: "normal",
                    fontStretch: "100%",
                    fontSize: "15px",
                    fontWeight: "600",
                  }}
                >
                  Garanties
                </Link>

                <Link
                  href="/aides"
                  className="text-sm font-medium text-gray-800 hover:text-gray-600 transition-colors"
                  style={{
                    transform: "scaleY(1)",
                    fontStyle: "normal",
                    fontStretch: "100%",
                    fontSize: "15px",
                    fontWeight: "600",
                  }}
                >
                  Aides
                </Link>

                <Link
                  href="/avis"
                  className="text-sm font-medium text-gray-800 hover:text-gray-600 transition-colors"
                  style={{
                    transform: "scaleY(1)",
                    fontStyle: "normal",
                    fontStretch: "100%",
                    fontSize: "15px",
                    fontWeight: "600",
                  }}
                >
                  Avis
                </Link>
              </div>
              <div>
                <Link
                  href="/demande-devis"
                  className="inline-flex items-center justify-center px-6 py-3 bg-yellow-500 hover:bg-yellow-600 text-white font-medium rounded-full transition-colors duration-200"
                >
                  <FontAwesomeIcon icon={faAnglesRight} />
                  Demander un devis personnalisé
                </Link>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

interface CardProps {
  imageSrc: string;
  title: string;
  description: string;
  linkText: string;
  linkHref: string;
}

function Card(
  { imageSrc, title, description, linkText, linkHref }: CardProps,
) {
  return (
    <div className="bg-[#ffffff] rounded-xl p-4 max-w-sm text-center ">
      <img
        src={imageSrc}
        alt={title}
        className="mx-auto w-28 h-28 object-contain mb-3"
      />
      <h3 className="text-lg font-semibold">{title}</h3>
      <p className="text-black text-sm">{description}</p>
      <a
        href={linkHref}
        className="text-blue-600 font-semibold mt-2 inline-block hover:underline"
      >
        {linkText}
      </a>
    </div>
  );
}
